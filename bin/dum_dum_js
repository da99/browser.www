#!/usr/bin/env bash
#
#
THE_ARGS="$@"
THIS_DIR="$(bash_setup dirname_of_bin "$0")"
PORT=${PORT:-"4567"}

export PORT
TEMP="/tmp/dum_dum_js"
TEMP_DIR=${TEMP_DIR:-"/temp/dum_dum_js"}
export TEMP_DIR
mkdir -p $TEMP

if [[ -z "$@" ]]; then
  action="watch"
else
  action=$1
  shift
fi

set -u -e -o pipefail


Color_Off='\e[0m'
Bold="$(tput bold)"
Reset='\e[0m'
BRed='\e[1;31m'
Red='\e[0;31m'
Green='\e[0;32m'
BGreen='\e[1;32m'
Orange='\e[0;33m'
BOrange='\e[1;33m'



case $action in
  help|--help)
    bash_setup print_help $0
    ;;

  *)
    func_file="$THIS_DIR/bin/functions/${action}.sh"
    if [[ -s "$func_file" ]]; then
      source "$func_file"
      "$action" $@
      exit 0
    fi

    echo "!!! Unknown action: $action" 1>&2
    exit 1
    ;;
esac
